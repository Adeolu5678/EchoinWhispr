# Deferred Features: Foundation-First Approach

AI Agent, for the following deferred features (from SSD Section 3.3), implement the "window-spaces" and foundational code. Each feature must be conditionally rendered or activated via its corresponding feature flag from config/featureFlags.ts.

3.1. General Principles for Deferred Features
Feature Flag Check: All UI elements, routes, or logic related to these features must be wrapped in an if (FEATURE_FLAGS.FEATURE_NAME) check.
UI Placeholders: For UI-related deferred features, create a visually distinct, but inactive or hidden, placeholder element. For example, a disabled button or an Icon that does nothing on click.
Convex Schema: Ensure the Convex schema (Convex/schema.ts) includes the necessary fields for these future features (e.g., conversationId in whispers, imageUrl in whispers and users).
No Active Logic: Do not implement active functionality for these features in the MVP. Focus solely on the "window-space" and schema definitions.

3.2. Specific Deferred Features
3.2.1. Conversation Evolution (FR-DEFER-001)
Feature Flag: FEATURE_FLAGS.CONVERSATION_EVOLUTION
UI: In the WhisperCard component, conditionally render an inactive/disabled "Echo Back" Shadcn Button if the feature flag is true. This button should visually communicate that the feature is coming soon.
Convex Schema: Ensure conversations table is defined (as per SSD Section 3.4.3) and conversationId field is present in whispers table.
3.2.2. Image Uploads (FR-DEFER-002)
Feature Flags: FEATURE_FLAGS.IMAGE_UPLOADS, FEATURE_FLAGS.PROFILE_PICTURES
UI (Whisper Content): In the ComposeWhisper component, conditionally render an inactive/disabled Shadcn Button or an icon for "Attach Image" if FEATURE_FLAGS.IMAGE_UPLOADS is true.
UI (Profile Pictures): Create a basic "Profile" page/component (features/profile/ProfileScreen.tsx) that conditionally renders a circular image placeholder (e.g., a Shadcn Avatar) with an inactive "Upload Photo" button if FEATURE_FLAGS.PROFILE_PICTURES is true. This page should display the user's displayName and username.
Convex Schema: Ensure imageUrl field in whispers table and profileImageUrl field in users table are defined.
3.2.3. User Profile Management (FR-DEFER-003)
Feature Flag: FEATURE_FLAGS.USER_PROFILE_EDITING
UI: On the "Profile" page/component, display the user's displayName and username (read-only for MVP). If FEATURE_FLAGS.USER_PROFILE_EDITING is true, display a Shadcn Button labeled "Edit Profile" which is visually disabled or shows a "coming soon" tooltip.
Convex Schema: Ensure bio field is present in users table.
3.2.4. Location-Based Features (FR-DEFER-005)
Feature Flag: FEATURE_FLAGS.LOCATION_BASED_FEATURES
UI: For the MVP, no direct UI for location sharing is required. However, if a future design needs a placeholder, a subtle, inactive icon (e.g., a map pin) could be conditionally rendered in the ComposeWhisper component if the flag is true.
Convex Schema: Ensure location field (object: {latitude: number, longitude: number}) is present in whispers table.

d